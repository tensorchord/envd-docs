

# å¼€å‘æ•™ç¨‹

é¦–å…ˆæ„Ÿè°¢ä½ æ„¿æ„ä¸º `envd` æ·»ç –åŠ ç“¦ ğŸŒŸ!

æˆ‘ä»¬çš„ç¤¾åŒºæ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®å¹¶ä¸”å¸Œæœ›èƒ½å°½æˆ‘ä»¬æ‰€èƒ½åœ°å»æ‹“å±•â€œè´¡çŒ®è€…â€è¿™ä¸ªè¯çš„å«ä¹‰ã€‚æˆ‘ä»¬çš„ [è´¡çŒ®æŒ‡å—](community/contributing) åŒ…å«ä¸€äº›å¯ä»¥å‚ä¸åˆ°é¡¹ç›®å…¶ä¸­çš„å…¶ä»–æ–¹å¼ã€‚å¦‚æœä½ æƒ³å‘é¡¹ç›®è´¡çŒ®ä»£ç ï¼Œé‚£ä¹ˆä¸‹é¢åŒ…å«ä¸€äº›åŸºç¡€çš„æ­¥éª¤ã€‚

## ä»£ç åº“ç»“æ„

`envd` çš„æºä»£ç æ‰˜ç®¡åœ¨ [github.com/tensorchord/envd](https://github.com/tensorchord/envd)ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé¡¹ç›®æ–‡æ¡£çš„æºä»£ç æ‰˜ç®¡åœ¨ [github.com/tensorchord/envd-docs](https://github.com/tensorchord/envd-docs)ã€‚

é¡¹ç›®çš„ä»£ç åº“ä¸­æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€çŸ­çš„æ¦‚æ‹¬ã€‚è¿™äº›æ–‡ä»¶ï¼ˆå¤¹ï¼‰çœ‹èµ·æ¥å¾ˆéš¾æ‡‚ï¼Œä½†ä½ ä¸éœ€è¦äº†è§£ä»£ç åº“æ¯ä¸€ä¸ªæ–‡ä»¶çš„ä½œç”¨ã€‚æˆ‘ä»¬æ¨èå…ˆä»ä¸€ä¸ªæ¨¡å—å¼€å§‹å­¦ä¹ ï¼ˆæ¯”å¦‚ï¼Œåœ¨ `envd` ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼‰ï¼Œç„¶åæ…¢æ…¢åœ°å»äº†è§£å…¶ä»–éƒ¨åˆ†ã€‚

- [ğŸ“ base-images/](https://github.com/tensorchord/envd/tree/main/base-images) åŒ…å« Dockerfiles å’Œ `envd` åŸºç¡€é•œåƒçš„å»ºé€ è„šæœ¬ã€‚
- [ğŸ“ cmd/](https://github.com/tensorchord/envd/tree/main/cmd) åŒ…å« `envd` å’Œ `envd-sshd` çš„å‘½ä»¤è¡Œç•Œé¢ä»£ç 
    - [ğŸ“ envd/](https://github.com/tensorchord/envd/tree/main/cmd/envd) `envd` çš„å‘½ä»¤è¡Œç•Œé¢
    - [ğŸ“ envd-sshd/](https://github.com/tensorchord/envd/tree/main/cmd/envd-sshd) `envd-sshd` çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œ`envd` ç”¨æˆ·ä¸ä¼šç›´æ¥ä½¿ç”¨å®ƒã€‚å®ƒä¼šæ³¨å…¥åˆ°è¿è¡Œç¯å¢ƒæ¥è®¾ç½® sshd
- [ğŸ“ docs/](https://github.com/tensorchord/envd/tree/main/docs) å¹¶ä¸åŒ…å«æ–‡æ¡£ï¼å®ƒåŒ…å« `README.md` ä¸­çš„æè®®å’Œé™æ€èµ„æºã€‚é¡¹ç›®æ–‡æ¡£æ‰˜ç®¡åœ¨ [github.com/tensorchord/envd-docs](https://github.com/tensorchord/envd-docs)ã€‚
- [ğŸ“ envd/](https://github.com/tensorchord/envd/tree/main/envd) åŒ…å«ä¸€ä¸ªç”¨æ¥ç”Ÿæˆ API å¼•ç”¨çš„å‡ python åŒ…ã€‚ä½ åªéœ€è¦åœ¨å¯¹ `envd` API åšå‡ºä¿®æ”¹æ—¶æ‰éœ€è¦å¯¹è¿™ä¸ªéƒ¨åˆ†åšå‡ºæ”¹åŠ¨ã€‚
- [ğŸ“ examples/](https://github.com/tensorchord/envd/tree/main/examples) åŒ…å« `envd` çš„ä¸€äº›ç¤ºä¾‹ä»£ç ã€‚
- [ğŸ“ pkg/](https://github.com/tensorchord/envd/tree/main/pkg) åŒ…å« `envd` å‘½ä»¤è¡Œç•Œé¢çš„ä»£ç å®ç°ã€‚
    - [ğŸ“ app/](https://github.com/tensorchord/envd/tree/main/pkg/app) åŒ…å«å‘½ä»¤è¡Œç•Œé¢çš„é…ç½®ã€‚
    - [ğŸ“ autocomplete/](https://github.com/tensorchord/envd/tree/main/pkg/autocomplete) åŒ…å« bash å’Œ zsh çš„è‡ªåŠ¨è¡¥å…¨ä»£ç ã€‚
    - [ğŸ“ builder/](https://github.com/tensorchord/envd/tree/main/pkg/builder) åŒ…å« buildkit çš„å»ºé€ å™¨ï¼Œå®ƒæ˜¯é¡¹ç›®ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚å»ºé€ å™¨ä¼šå°† starlark ç¼–è¯‘æˆ [buildkit LLB](https://github.com/moby/buildkit#exploring-llb)ï¼Œç„¶åå†æ„é€ é•œåƒã€‚
    - [ğŸ“ buildkitd/](https://github.com/tensorchord/envd/tree/main/pkg/buildkitd) åŒ…å«è¿æ¥ buildkitd å®¹å™¨çš„å®¢æˆ·ç«¯ä»£ç ã€‚
    - [ğŸ“ config/](https://github.com/tensorchord/envd/tree/main/pkg/config) åŒ…å« `envd` çš„é…ç½®æ–‡ä»¶ã€‚
    - [ğŸ“ docker/](https://github.com/tensorchord/envd/tree/main/pkg/docker) åŒ…å«ä½¿ç”¨ docker è¿›ç¨‹çš„å®¢æˆ·ç«¯ä»£ç ã€‚
    - [ğŸ“ editor/](https://github.com/tensorchord/envd/tree/main/pkg/editor) åŒ…å« vscode å’Œ jupyter ç›¸å…³çš„ä»£ç å®ç°ã€‚
    - [ğŸ“ envd/](https://github.com/tensorchord/envd/tree/main/pkg/envd) åŒ…å« `envd` å¼•æ“ä»£ç ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç† `envd` ç¯å¢ƒçš„æŠ½è±¡å±‚ã€‚
    - [ğŸ“ flag/](https://github.com/tensorchord/envd/tree/main/pkg/flag) åŒ…å«[viper](https://github.com/spf13/viper)çš„ `flags` ä¿¡æ¯ã€‚
    - [ğŸ“ home/](https://github.com/tensorchord/envd/tree/main/pkg/home) åŒ…å«ç”¨æ¥ç®¡ç† [XDG directories](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html) çš„ä»£ç  (æ¯”å¦‚ `$HOME/.config/envd` å’Œ `$HOME/.cache/envd`)ã€‚
    - [ğŸ“ lang/](https://github.com/tensorchord/envd/tree/main/pkg/lang) åŒ…å«å»ºé€ è¯­è¨€ä»£ç ã€‚å¦‚æœä½ æƒ³å¾€ `envd` åŠ å…¥æ–°å‡½æ•°ï¼Œé‚£ä¹ˆä½ éœ€è¦æ›´æ–°è¯¥éƒ¨åˆ†ã€‚
    - [ğŸ“ progress/](https://github.com/tensorchord/envd/tree/main/pkg/progress) åŒ…å«å»ºé€ è¿›å±•çš„è¾“å‡ºä»£ç ã€‚å¤§éƒ¨åˆ†æƒ…å†µä½ éƒ½ä¸éœ€è¦ä¿®æ”¹å®ƒã€‚
    - [ğŸ“ remote/](https://github.com/tensorchord/envd/tree/main/pkg/remote) åŒ…å« sshd çš„ä»£ç å®ç°ã€‚å¤§éƒ¨åˆ†æƒ…å†µä½ éƒ½ä¸éœ€è¦ä¿®æ”¹å®ƒã€‚
    - [ğŸ“ shell/](https://github.com/tensorchord/envd/tree/main/pkg/shell) åŒ…å« zsh ç›¸å…³çš„ä»£ç ã€‚
    - [ğŸ“ ssh/](https://github.com/tensorchord/envd/tree/main/pkg/ssh) åŒ…å«ä¸€ä¸ª ssh å®¢æˆ·ç«¯ï¼Œåœ¨æ‰§è¡Œ `envd up` æ—¶å®ƒè´Ÿè´£è¿æ¥åˆ°è¿è¡Œå®¹å™¨ã€‚
    - [ğŸ“ types/](https://github.com/tensorchord/envd/tree/main/pkg/types) å®šä¹‰äº†ä¸€äº›åœ¨ [ğŸ“ pkg/envd](https://github.com/tensorchord/envd/tree/main/pkg/envd) ç”¨åˆ°çš„ç±»å‹ã€‚

## å¼€å‘æµç¨‹

ä¸‹é¢çš„è¿™äº›æ­¥éª¤ä¼šå¸¦ä½ ç†Ÿæ‚‰å¦‚ä½•åˆå§‹çš„è®¾ç½®æ­¥éª¤å’Œå¼€å‘æµç¨‹ã€‚å¦‚æœä½ æœ‰ä»»ä½•ç–‘é—®ï¼Œä½ å¯ä»¥åœ¨ [discord](https://discord.gg/KqswhpVgdU) ä¸Šé—®ï¼Œæˆ–è€…åœ¨ issues æ¿å—ä¸­æè¿°ä½ æœ‰ç–‘é—®çš„æ­¥éª¤ï¼Œæˆ‘ä»¬ä¼šå°½åŠ›å¸®åŠ©ä½ è§£å†³é—®é¢˜ã€‚

1. å®‰è£… [Docker](https://www.docker.com/products/docker-desktop/) (20.10.0 æˆ–æ›´æ–°ç‰ˆæœ¬) ä»¥åŠ [Golang](https://go.dev/dl/) (1.18 æˆ–æ›´æ–°ç‰ˆæœ¬).
2. åœ¨ä½ è‡ªå·±çš„ GitHub è´¦å·ä¸­ [Fork](https://help.github.com/articles/fork-a-repo) [`envd` ä»£ç åº“](https://github.com/tensorchord/envd)ã€‚ï¼ˆè¯·ä¸è¦å‹¾é€‰ "Copy the `main` branch only"ï¼‰
3. å°†ä½ è´¦å·ä¸­åˆš Fork çš„ä»£ç åº“ Clone åˆ°ä½ ç”µè„‘çš„æœ¬åœ°ç£ç›˜ä¸Šã€‚
    ```
    $ git clone https://github.com/YOUR_USERNAME/envd.git
    ```
4. å®‰è£…ç›¸å…³çš„ä¾èµ–åº“å¹¶ç¼–è¯‘ `envd`ã€‚ç¡®ä¿èƒ½è¾“å‡ºæ­£ç¡®çš„ version ä¿¡æ¯ï¼Œå¦åˆ™æ£€æŸ¥ git tags æ˜¯å¦åŒ…å«å†å² tagsã€‚
    ```
    $ go mod tidy
    $ make
    $ ./bin/envd bootstrap
    $ ./bin/envd version
    ```
5. åœ¨æœ¬åœ°çš„ä»£ç åº“ä¸­è¿›è¡Œä¿®æ”¹å¹¶ä¸”ç”¨ Git å°†è¿™äº›æ”¹åŠ¨ Commitã€‚
    ```
    $ git add -u
    $ git commit -m "YOUR COMMIT MESSAGE"
    ```
6. å°†ä½ æœ¬åœ°çš„æ”¹åŠ¨[Push](https://help.github.com/articles/github-glossary/#push) åˆ°ä½  GitHub ä¸Šçš„è¿œç¨‹ä»“åº“ä¸­ã€‚
    ```
    $ git push
    ```

### Lintï¼ˆç”¨äºæ£€æŸ¥ä»£ç æ ¼å¼/é”™è¯¯çš„å·¥å…·ï¼‰

ä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„æŒ‡ä»¤æ¥å¯¹ä»£ç è¿›è¡Œæµ‹è¯•

```
make lint
```

å¦‚æœä½ çš„ä»£ç æœ‰æ ¼å¼æˆ–è¯­æ³•é”™è¯¯ï¼Œä½ ä¼šçœ‹åˆ°å’Œä¸‹é¢ç›¸ä¼¼çš„è¾“å‡ºï¼š

```
cmd/envd/main.go:36:67: Revision not declared by package version (typecheck)
                fmt.Println(c.App.Name, version.Package, c.App.Version, version.Revision)
                                                                                ^
make: *** [Makefile:102: lint] Error 1
```

### è¿è¡Œæµ‹è¯•

ä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„æŒ‡ä»¤æ¥æµ‹è¯•ä½ çš„ä»£ç 

```
make test
```

## ä»å¼€å‘è€…çš„è§’åº¦ç†è§£ `envd up`

`envd`ä¼šè§£æ `build.envd` ä¸­çš„æ‰€æœ‰è¯­å¥å¹¶æ‰§è¡Œ `build()` å‡½æ•°ã€‚åƒ [`install.python_packages`](../api/starlark/install#python_packages) å’Œ [`config.jupyter`](../api/starlark/config#jupyter) çš„å‡½æ•°è°ƒç”¨ä¼šåœ¨ envd å‚¨å­˜åœ¨å†…å­˜çš„é™æ€å›¾ä¸­æ³¨å†Œè‡ªå·±çš„ä¿¡æ¯ã€‚éšåï¼Œ`envd` ä¼šæ ¹æ®è¿™äº›ä¿¡æ¯æ¥æ„å»º [buildkit LLB æµç¨‹å›¾](https://github.com/moby/buildkit#exploring-llb) å¹¶ç”¨å®ƒæ¥æ„å»ºäº§å‡ºé•œåƒã€‚

![](./assets/envd-arch.svg)

## GitHub Issue æµç¨‹

- è¢«æ ‡è®°ä¸º [`good first issue ğŸ’–`](https://github.com/tensorchord/envd/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue+%E2%9D%A4%EF%B8%8F%22) çš„ issues é€‚åˆç”¨æ¥åœ¨ä¸€å¼€å§‹ç†Ÿæ‚‰é¡¹ç›®ä»£ç ã€‚
- å¦‚æœä½ å¸Œæœ›è§£å†³ä¸€ä¸ªç°æœ‰çš„ issueï¼Œä½ å¯ä»¥åœ¨ issue é¡µé¢ä¸Šè¯„è®ºè¯´ä½ å¸Œæœ›è´Ÿè´£è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ ·çš„è¯å…¶ä»–è´¡çŒ®è€…å°±çŸ¥é“è¿™ä¸ªé—®é¢˜æœ‰äººè®¤é¢†äº†ï¼Œå¹¶ä¸”å¯ä»¥æä¾›å¸®åŠ©ã€‚
